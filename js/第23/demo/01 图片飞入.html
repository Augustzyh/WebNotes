<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>40-js</title>
  <style>
    *{margin:0;padding:0;}
    #box{
      position: relative;
      width: 500px;
      height: 500px;
      margin:50px auto;
      border:1px solid;
    }
    #box > div{
      position: absolute;
      width: 50px;
      height: 50px;
    }
  </style>
  <script src="animation.js"></script>
</head>
<body>
  <div id="box"></div>
  <script>
    /* 
      01 02 03 04 05 06 07 08 09 10
      11 12 13 14 15 16 17 18 19 20
      21 22 23 24 25 26 27 28 29 30
      31 32 33 34 35 36 37 38 39 40
      41 42 43 44 45 46 47 48 49 50
      51 52 53 54 55 56 57 58 59 60
      61 62 63 64 65 66 67 68 69 70
      71 72 73 74 75 76 77 78 79 80
      81 82 83 84 85 86 87 88 89 90
      91 92 93 94 95 96 97 99 99 100
     */
    
    const box = document.getElementById("box")
    const div = box.getElementsByTagName("div")
    const {floor: f, random: r} = Math
    const arr = []
    const len = 100


    for (let i = 0; i < len; i++)arr.push(i)
    
    arr.sort((a, b) => r() - 0.5)
    
    let i = 0
    run()
    function run(){
      // 取数组对应的值
      let value = arr[i]
      
      // 超过数组的长度，就停止
      if(i > len - 1) return
      
      // 如果没有超过 就一直回调
      let top = f(value/10) * 50
      let left = (value%10) * 50
      
      box.innerHTML += "<div></div>"
      
      // 控制box最新的对象的背景定位
      div[i].style.cssText = `background: url(./1.png) -${left}px -${top}px;`
      
      animation(div[i], {
        data: {
          top,
          left
        }
      }, 200, () => {
        // 动画的回调里 开启 run的下一次回调
        i++
        requestAnimationFrame(run)
      })
      

    }
    
    
    
    
    
    

    
    
    
  </script>
</body>
</html>