<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="Author" content="FengYu">
  <title>40js</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      font-family: Microsoft YaHei, serif;
    }

    li {
      list-style: none;
    }

    #box {
      margin: 50px auto;
      width: 997px;
      height: 455px;
    }

    #box .head {
      width: 1000px;
      height: 50px;
    }

    #box .head li {
      float: left;
      width: 248px;
      height: 48px;
      border: 1px solid #c36;
      border-right: 1px solid #900;
      background: #CC3366;
      text-align: center;
      line-height: 50px;
      color: white;
      font-weight: bold;
      font-size: 14px;
    }

    #content {
      width: 998px;
      border-left: 1px solid #CC3366;
      border-right: 1px solid #CC3366;
      overflow: hidden;
    }

    #content ul {
      width: 1000px;
      border-bottom: 1px solid #900;
      overflow: hidden;
    }

    #content ul li {
      float: left;
      width: 248.75px;
      height: 100px;
      border-right: 1px solid #900;
      text-align: center;
      line-height: 100px;
      position: relative;

    }

    #content ul li img {
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
      margin: auto;
      width: 90px;
    }

    #content ul li.num span {
      display: inline-block;
      width: 30px;
      height: 30px;
      border: 1px solid #ddd;
      line-height: 30px;
      margin: 35px auto;
      font-weight: bold;
    }

    #content ul li.num span.add,
    #content ul li.num span.sub {
      background: #ddd;
      cursor: pointer;
    }

    #content ul li.num span.txt {
      width: 70px;
    }

    #foot {
      margin: 10px auto;
      width: 1000px;
      height: 50px;
      background: #c36;
    }

    #foot p {
      width: 250px;
      float: right;
      text-align: center;
      line-height: 50px;
      color: white;
    }

    #foot p span {
      color: #ff9;
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <div id="box">
    <ul class='head'>
      <li>商品</li>
      <li>单价</li>
      <li>数量</li>
      <li style='border-right:1px solid #c36;'>小计</li>
    </ul>


    <div id="content">
      <ul>
        <li class='img'>
          <img src="images/shop1.jpg">
        </li>
        <li class='danjia'>8</li>
        <li class='num'>
          <span class='sub'>-</span>
          <span class='txt'>0</span>
          <span class='add'>+</span>
        </li>
        <li class='xiaoji'>0</li>
      </ul>
      <ul>
        <li class='img'>
          <img src="images/shop2.jpg">
        </li>
        <li class='danjia'>10</li>
        <li class='num'>
          <span class='sub'>-</span>
          <span class='txt'>0</span>
          <span class='add'>+</span>
        </li>
        <li class='xiaoji'>0</li>
      </ul>
      <ul>
        <li class='img'>
          <img src="images/shop3.jpg">
        </li>
        <li class='danjia'>12.5</li>
        <li class='num'>
          <span class='sub'>-</span>
          <span class='txt'>0</span>
          <span class='add'>+</span>
        </li>
        <li class='xiaoji'>0</li>
      </ul>
      <ul>
        <li class='img'>
          <img src="images/shop4.jpg">
        </li>
        <li class='danjia'>23</li>
        <li class='num'>
          <span class='sub'>-</span>
          <span class='txt'>0</span>
          <span class='add'>+</span>
        </li>
        <li class='xiaoji'>0</li>
      </ul>
    </div>
    <div id="foot">
      <p>合计费用￥
        <span class='total'>0</span>
      </p>
      <p>已选中商品:
        <span class='numtot'>0</span> 个</p>
    </div>
  </div>

  <script>
    let danjia = document.getElementsByClassName("danjia")
    let sub = document.getElementsByClassName("sub")
    let txt = document.getElementsByClassName("txt")
    let add = document.getElementsByClassName("add")
    let xiaoji = document.getElementsByClassName("xiaoji")
    let total = document.getElementsByClassName("total")[0]
    let numTotal = document.getElementsByClassName("numtot")[0]
    
    let len = add.length

    for (let i = 0; i < len; i++){
      // add 注册单击事件
      add[i].onclick = function (){
        // 当前点击的对象的序号i
        // let thisNum = txt[i].innerHTML
        // thisNum++
        txt[i].innerHTML++
        numChange(i)
      }

      // sub 注册单击事件
      sub[i].onclick = function(){
        // txt[i].innerHTML--
        //(--txt[i].innerHTML < 0) && (txt[i].innerHTML = 0)
        if(--txt[i].innerHTML < 0){
          txt[i].innerHTML = 0
        }
        numChange(i)
      }
    }

    // 有任意一个列表数量发生变化就执行函数，函数就是对新的数据进行统计，填值
    function numChange(idx){
      let totalValue = 0
      let numValue = 0

      xiaoji[idx].innerHTML = danjia[idx].innerHTML * txt[idx].innerHTML

      for (let i = 0; i < len; i++){
        totalValue += xiaoji[i].innerHTML*1
        numValue += txt[i].innerHTML*1
      }
      total.innerHTML = totalValue
      numTotal.innerHTML = numValue
    }
    
    


  </script>
</body>

</html>